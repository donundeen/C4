



<template name="widget">
  <div class="widgetContainer container-item"  style="{{usableWidgetStyle}}" id="widgetContainer_{{url}}">

    <!-- widget header, the menu -->
    <!-- display-mode header -->
    <div class="widgetMouseOverTarget displaymodeonly">
    </div>
    <div class="widgetDisplayHeader container-item displaymodeonly">
      <div class="widgetName">
      <h3>{{name}}</h3>
      </div>
      <div class="widgetCreator">
          <b>Created By:</b> {{createdBy.username}}
      </div>
      <div class="widgetDescription">
      <i>{{description}}</i>
      </div>
      {{#if isMyWidget}}
      <div class="widgetmenu lock clickable" title="click to unlock widget">
        <li class="clickable widgeticon ion-locked display" id="lock_{{url}}" data-pack="default" data-tags="" style="display: inline-block;"> - Unlock for Editing</li>
      </div>
      {{else}}
      <div class="widgetmenu copy clickable" title="click to unlock widget" >
        <li class="ion-ios-copy-outline widgeticon" data-pack="default" data-tags="" style="display: inline-block;">
        - Copy This Widget
      </li>
      </div>

      {{/if}}      
    </div>
    <!-- end display-mode header -->

    <!-- edit-mode header-->
    <div class="widgetEditHeader editmodeonly">
<nav class="navbar navbar-default">
  <div class="container-fluid">
    <div class="navbar-header"><a class="navbar-brand" href="#">{{name}}</a></div>
    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-{{_id}}">    
      <ul class="nav navbar-nav">
        <li><a href="#myModal" data-toggle="modal" data-target="#info_modal_{{_id}}">Info</a></li>
        <li class="dropdown">
          <a href="#" data-toggle="dropdown" class="dropdown-toggle">Actions <b class="caret"></b></a>
          <ul class="dropdown-menu">
            <li class="dropdown_widgeticon save ion-ios-upload clickable " data-pack="default" data-tags="" alt="save widget" style="display: inline-block;"> Save</li>

            {{#if isTemplate}}
            <li class="clickable dropdown_widgeticon save_template ion-paper-airplane {{#if isTemplate}}
isWidget{{/if}}" data-pack="default" data-tags="" alt="remove from reusable template list" style="display: inline-block;" title="remove this widget from reusable template list."> Remove From Templates</li>
            {{else}}
            <li class="clickable dropdown_widgeticon save_template ion-paper-airplane {{#if isTemplate}}
isWidget{{/if}}" data-pack="default" data-tags="" alt="save as a reusable template" style="display: inline-block;" title="save this widget as a reusable template (will show up in the header drop down with the same icon)."> Save as Template</li>
            {{/if}}
            <li class="divider"></li>
            <li class="clickable dropdown_widgeticon ion-ios-trash-outline delete" id="delete_{{url}}" data-pack="ios" data-tags="delete, remove, dispose, waste, basket, dump, kill" style="display: inline-block;"> Delete Widget</li>
          </ul>
        </li>

        <li class="dropdown">
          <a href="#" data-toggle="dropdown" class="dropdown-toggle">Code Snippets<b class="caret"></b></a>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenu1_{{url}}">
            <li>Pull Data from:</li>
            {{#each otherwidgets}}
              <li><a href="#" class="add_code {{url}} clickable" data-pullfrom="{{url}}" data-pulltype="data"><i class="widgetIDText" data-pullfrom="{{url}}" data-pulltype="data">{{url}}</i>: {{name}} (data)</a></li>
              <li><a href="#" class="add_code {{url}} clickable" data-pullfrom="{{url}}" data-pulltype="html"><i class="widgetIDText" data-pullfrom="{{url}}" data-pulltype="html">{{url}}</i>: {{name}} (html)</a></li>
<li role="separator" class="divider"></li>              
            {{/each}}
            <li><a href="#" class="call_webservice_url clickable">Call Webservice Url...</a></li>
          </ul>
        </li>
        <li><a href="#myConfigModal" data-toggle="modal" data-target="#config_modal_{{_id}}">Settings</a></li>



      </ul> 

      <ul class="nav navbar-nav navbar-right">
        <li><a href="#">
          <div class="widgetmenu unlock editmodeonly" title="click to lock widget" >
            <li class="widgeticon ion-unlocked edit" id="unlock_{{url}}" data-pack="default" data-tags="" style="display: inline-block;"></li>
          </div>
        </a></li>
      </ul>

    </div>
  </div>
</nav>

<div class="modal fade" id="info_modal_{{_id}}">
  <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h4 class="modal-title">Widget Info</h4>
        </div>
        <div class="modal-body">
          <B>Widget Name:</b> {{> editableText collection="widgets" field="name"}}
          <BR>
          <B>Description:</b> {{> editableText collection="widgets" textarea=true acceptEmpty=true field="description"}}
          <BR>
          <b>Created By:</b> {{createdBy.username}}
          <HR>
          <b style="font-size: 1.1em;">API Links:</b>
          <BR>
          <B>Standalone:</b><a href="/headless/{{url}}/{{pagetype}}/{{pageid}}.page" target="_blank">/headless/{{url}}/{{pagetype}}/{{pageid}}.page</a>
          <br>
          <b>JSON Output:</b><a href="/headless/{{url}}/{{pagetype}}/{{pageid}}.json" target="_blank">/headless/{{url}}/{{pagetype}}/{{pageid}}.json</a>
          <br>
          <b>HTML Output:</b><a href="/headless/{{url}}/{{pagetype}}/{{pageid}}.html" target="_blank">/headless/{{url}}/{{pagetype}}/{{pageid}}.html</a>
          <BR>
          <b>JSBIN Embed URL:</b> http://localhost/jsbin/{{url}}/latest/edit?output&height={{jsbinHeight}}&pagetype={{pagetype}}&pageid={{pageid}}
        </div>
        <div class="modal-footer">
          <a href="#" data-dismiss="modal" class="btn">Close</a>
        </div>
      </div>
    </div>
</div>


<div class="modal fade" id="config_modal_{{_id}}">
  <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
          <h4 class="modal-title">Widget Style Config</h4>
        </div>
        <div class="modal-body">
          <B>Display Mode Width (include px or %):</b> {{> editableText collection="widgets" field="displayWidth"   acceptEmpty=true  placeholder="enter valid css for width"}}
          <BR>
          <B>Display Mode Height (include px or %):</b> {{> editableText collection="widgets" field="displayHeight"  acceptEmpty=true  placeholder="enter valid css for height"}}
          <HR>
          <B>Raw CSS (for stye attribute):</b> {{> editableText textarea=true acceptEmpty=true collection="widgets" field="widgetStyle" placeholder="enter valid css for 'style' attribute"}}
        </div>
        <div class="modal-footer">
          <a href="#" data-dismiss="modal" class="btn">Close</a>
        </div>
      </div>
    </div>
</div>
      <!--

      <div class="container-item">

      <B class="widgetName editmodeonly">{{> editableText collection="widgets" field="name"}}</b><span class="editmodeonly widgetIdText"> uid: {{url}}/{{pageurl}}</span>
      </div>
      <div class="container-item widgetmenu unlock editmodeonly" title="click to lock widget" style="display:none">
        <li class="widgeticon ion-unlocked edit" id="unlock_{{url}}" data-pack="default" data-tags="" style="display: inline-block;"></li>
      </div>
      <div class="container-item widgetmenu test editmodeonly" align="center" title="random testing button. click with caution">       
        <li class="widgeticon test ion-pizza" data-pack="default" data-tags="" alt="random testing button" style="display: inline-block;"></li>
      </div>
      <div class="container-item widgetmenu save_template editmodeonly" align="center" title="save this widget as a reusable template (will show up in the header drop down with the same icon).">       
        <li class="widgeticon save_template ion-paper-airplane       {{#if isTemplate}}
isWidget{{/if}}" data-pack="default" data-tags="" alt="save as a reusable template" style="display: inline-block;"></li>
      </div>
      <div class="container-item widgetmenu save editmodeonly" align="center" title="save this widget">       
        <li class="widgeticon save ion-ios-upload " data-pack="default" data-tags="" alt="save widget" style="display: inline-block;"></li>
      </div>
      <div class="container-item widgetmenu editmodeonly" align="center" title="pull data from another widget on this page (dropdown).">
        <div class="dropdown">
          <button class="btn btn-default dropdown-toggle tooltipped" alt="alt tooltip" type="button" id="dropdownMenu1_{{url}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="true" data-tooltip="pull data from widget">
            Pull from
            <span class="caret"></span>
          </button>
          <ul class="dropdown-menu" aria-labelledby="dropdownMenu1_{{url}}">
            {{#each otherwidgets}}
              <li><a href="#" class="add_code {{url}}" data-pullfrom="{{url}}" data-pulltype="data"><i class="widgetIDText" data-pullfrom="{{url}}" data-pulltype="data">{{url}}</i>: {{name}} (data)</a></li>
              <li><a href="#" class="add_code {{url}}" data-pullfrom="{{url}}" data-pulltype="html"><i class="widgetIDText" data-pullfrom="{{url}}" data-pulltype="html">{{url}}</i>: {{name}} (html)</a></li>
<li role="separator" class="divider"></li>              
            {{/each}}
          </ul>
        </div>
      </div>

      <div class="container-item editmodeonly" >
        <div class="widgetDescription">
          <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#widgetDescEdit_{{url}}" aria-expanded="false" aria-controls="widgetDescEdit_{{url}}" title="Click to see/edit full description"><i>{{shortIt description 15}}</i></button>
          <div class="collapse" id="widgetDescEdit_{{url}}">
            <div class="well">
              <i class="widgetDescriptionEdit">{{> editableText collection="widgets" textarea=true acceptEmpty=true field="description"}}</i>
            </div>
          </div>
        </div>
      </div>


      <div class="container-item editmodeonly" >
        <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#widgetStyleEdit_{{url}}" aria-expanded="false" aria-controls="widgetStyleEdit_{{url}}" title="CSS Style for this Widget's Display Mode">
            <li class="widgeticon ion-social-css3"  data-pack="ios" style="display: inline-block;"></li>
        </button>
        <div class="collapse" id="widgetStyleEdit_{{url}}">
          <div class="well">
            {{> editableText title="." textarea=true acceptEmpty=true collection="widgets" field="widgetStyle" placeholder="enter valid css for 'style' attribute"}}
          </div>
        </div>
      </div>
      <div class="container-item editmodeonly"><a href="/headless/{{url}}/{{pagetype}}/{{pageid}}" target="_blank">{{url}}/{{pagetype}}/{{pageid}}</a></div>

      <div class="container-item widgetmenu editmodeonly menuspacer">&nbsp;</div> 


      <div class="container-item widgetmenu editmodeonly deletewidget" title="delete this widget">
        <li class="widgeticon ion-ios-trash-outline delete" id="delete_{{url}}" data-pack="ios" data-tags="delete, remove, dispose, waste, basket, dump, kill" style="display: inline-block;"></li>
      </div>
      -->
    </div>
    <!-- edit-mode header-->


    <!-- end of menu header -->

    <div class="widgetBody" >
      <a class="jsbin jsbin-embed jsbin-embed-dyn" id="jsbin_{{url}}" href="http://localhost/jsbin/{{url}}/latest/edit?output&height={{jsbinHeight}}&pagetype={{pagetype}}&pageid={{pageid}}">JS Bin....{{url}}:</a>

<!--
      <a class="jsbin jsbin-embed jsbin-embed-dyn" id="jsbin_{{url}}" href="http://localhost/jsbin/{{url}}/latest/edit?output&height={{encodeURIComponent displayUsableHeight}}&pagetype={{pagetype}}&pageid={{pageid}}">JS Bin....{{url}}:</a>
    -->
      <script src="http://localhost/jsbin/js/embed.js"></script>
    </div>
  </div>
</template>
